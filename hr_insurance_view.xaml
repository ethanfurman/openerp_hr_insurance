!!! xml1.0

-act_window = 'ir.actions.act_window'
-view = 'ir.ui.view'

~openerp
    ~data

        ~record model=view #hr_insurance_company_form
            @name: hr.insurance.company.form
            @model: hr.insurance.company
            @priority eval='16'
            @arch type='xml'
                ~form $Insurers version='7.0'
                    ~h4
                        @partner_id domain="[('supplier','=',True)]"
                    ~label for='rate_ids'
                    @rate_ids nolabel='1' context="{'default_company_id': active_id}"
                        ~tree editable='top'
                            @year
                            @type
                            @employee
                            @and_spouse
                            @and_children
                            @and_family

        ~record model=view #hr_insurance_company_tree
            @name: hr.insurance.company.tree
            @model: hr.insurance.company
            @priority eval='16'
            @arch type='xml'
                ~tree $Insurers version='7.0'
                    @name_related
                    @medical
                    @dental
                    @vision
                    @life

        ~record model=act_window #hr_insurance_company_action
            @name: HR Insurance Company Configuration
            @res_model: hr.insurance.company
            @view_type: form
            @view_mode: tree,form

        ~menuitem name='Insurance Companies' #menu_hr_insurance_rate parent='hr.menu_hr_configuration' action='hr_insurance_company_action'

        // employee integration

        ~record model='ir.ui.view' #hr_employee_insurance_form
            @name: hr.employee.form
            @model: hr.employee
            @inherit_id ref='hr.view_employee_form'
            @priority eval='16'
            @arch type='xml'
                ~xpath expr="//page[@name='Personal']" position='after'
                    ~page @insurance $Insurance groups='base.group_hr_manager'
                        ~div @standard_insurance .hr_insurance
                            @hr_insurance_choice_ids nolabel='1' context="{'default_employee_id': id}"
                                ~tree editable='top'
                                    @year_month on_change='change_date(year_month, context)'
                                    @medical
                                    @dental
                                    @vision
                                    @life
                                    @note
