!!! xml1.0

-act_window = 'ir.actions.act_window'
-view = 'ir.ui.view'

~openerp
    ~data

        ~record model=view #hr_insurance_company_form
            @name: hr.insurance.company.form
            @model: hr.insurance.company
            @priority eval='16'
            @arch type='xml'
                ~form $Insurers version='7.0'
                    ~h4
                        @partner_id domain="[('supplier','=',True)]"
                    ~label for='rate_ids'
                    @rate_ids nolabel='1' context="{'default_company_id': active_id}"
                        ~tree editable='top'
                            @year
                            @type
                            @employee
                            @and_spouse
                            @and_children
                            @and_family

        ~record model=view #hr_insurance_company_tree
            @name: hr.insurance.company.tree
            @model: hr.insurance.company
            @priority eval='16'
            @arch type='xml'
                ~tree $Insurers version='7.0'
                    @name_related
                    @medical
                    @dental
                    @vision
                    @life

        ~record model=act_window #hr_insurance_company_action
            @name: HR Insurance Company Configuration
            @res_model: hr.insurance.company
            @view_type: form
            @view_mode: tree,form

        ~menuitem name='Insurance Companies' #menu_hr_insurance_rate parent='hr.menu_hr_configuration' action='hr_insurance_company_action'

        // employee integration

        ~record model='ir.ui.view' #hr_employee_insurance_form
            @name: hr.employee.form
            @model: hr.employee
            @inherit_id ref='hr.view_employee_form'
            @priority eval='16'
            @arch type='xml'
                ~xpath expr="//page[@name='Personal']" position='after'
                    ~page @insurance $Insurance groups='base.group_hr_manager'
                        // type     emp     spouse    child     declined
                        // Medical   $        $         $            x
                        // Dental    $        $         $
                        // Vision    $        $         $
                        // Life      $        $         $
                        ~div @standard_insurance .hr_insurance
                            ~table
                                ~tr
                                    ~td
                                        Year
                                        @hr_insurance_year .oe_inline on_change="onchange_hr_insurance('', 'year', hr_insurance_choice_ids, hr_insurance_year, '')"
                                    ~th: Medical
                                    ~th: Dental
                                    ~th: Vision
                                    ~th: Life
                                ~tr
                                    ~th: Employee
                                    ~td
                                        @hr_insurance_medical_self on_change="onchange_hr_insurance('medical', 'self', hr_insurance_choice_ids, hr_insurance_year, hr_insurance_medical_self)"
                                    ~td
                                        @hr_insurance_dental_self on_change="onchange_hr_insurance('dental', 'self', hr_insurance_choice_ids, hr_insurance_year, hr_insurance_dental_self)"
                                    ~td
                                        @hr_insurance_vision_self on_change="onchange_hr_insurance('vision', 'self', hr_insurance_choice_ids, hr_insurance_year, hr_insurance_vision_self)"
                                    ~td
                                        @hr_insurance_life_self on_change="onchange_hr_insurance('life', 'self', hr_insurance_choice_ids, hr_insurance_year, hr_insurance_life_self)"
                                ~tr
                                    ~th: Spouse
                                    ~td
                                        @hr_insurance_medical_spouse on_change="onchange_hr_insurance('medical', 'spouse', hr_insurance_choice_ids, hr_insurance_year, hr_insurance_medical_spouse)"
                                    ~td
                                        @hr_insurance_dental_spouse on_change="onchange_hr_insurance('dental', 'spouse', hr_insurance_choice_ids, hr_insurance_year, hr_insurance_dental_spouse)"
                                    ~td
                                        @hr_insurance_vision_spouse on_change="onchange_hr_insurance('vision', 'spouse', hr_insurance_choice_ids, hr_insurance_year, hr_insurance_vision_spouse)"
                                    ~td
                                        @hr_insurance_life_spouse on_change="onchange_hr_insurance('life', 'spouse', hr_insurance_choice_ids, hr_insurance_year, hr_insurance_life_spouse)"
                                ~tr
                                    ~th: Children
                                    ~td
                                        @hr_insurance_medical_children on_change="onchange_hr_insurance('medical', 'children', hr_insurance_choice_ids, hr_insurance_year, hr_insurance_medical_children)"
                                    ~td
                                        @hr_insurance_dental_children on_change="onchange_hr_insurance('dental', 'children', hr_insurance_choice_ids, hr_insurance_year, hr_insurance_dental_children)"
                                    ~td
                                        @hr_insurance_vision_children on_change="onchange_hr_insurance('vision', 'children', hr_insurance_choice_ids, hr_insurance_year, hr_insurance_vision_children)"
                                    ~td
                                        @hr_insurance_life_children on_change="onchange_hr_insurance('life', 'children', hr_insurance_choice_ids, hr_insurance_year, hr_insurance_life_children)"
                                ~tr
                                    ~th: Declined
                                    ~td
                                        @hr_insurance_medical_declined on_change="onchange_hr_insurance('medical', 'declined', hr_insurance_choice_ids, hr_insurance_year, hr_insurance_medical_declined)"
                            @hr_insurance_choice_ids nolabel='1'
                                ~tree editable='top'
                                    @year
                                    @medical
                                    @dental
                                    @vision
                                    @life

                // ~page @Claims position='inside'
                //    ~separator $Workers_Compensation_Claims
                //    @worker_comp_claim_ids context="{'default_employee_id': active_id}"


